---
title : "[CS] web - OSI 7계층"
excerpt: "1계층부터 위로 스멀스멀 올라가보자"

categories:
  - etc
tags:
  - [cs, web, network, osi7]

toc: true
toc_sticky: true

date: 2023-03-07
last_modified_at: 2023-03-07
---
<br>

## OSI 7계층

<img src="https://user-images.githubusercontent.com/81230679/223432480-7601f828-dfca-4666-bf21-2cd300411374.png" />

> 통신이 일어나는 과정을 단계별로 파악할 수 있다.

### 01. Physical Layer

> 디지털 신호를 인코더로 변환, 전송 -> 디코더를 통해 변조된 신호를 다시 원복
> 데이터를 전기적인 신호로 변환해서 주고 받는 기능만 진행
 
주로 전기적, 기계적, 기능적인 특성을 이용해 통신 케이블로 데이터를 전송. 1과 0으로 표현(전기적인 On, Off상태)되기에 통신 단위는 비트.
단지 데이터를 전달만 할뿐 전송하려는(또는 받으려는)데이터가 무엇인지, 어떤 에러가 있는지 등에는 전혀 신경 쓰지 않는다.
<br/>

ex) 케이블, 리피터, 허브등과 같은 PHY칩

### 02. Data Link Layer

> 송수신되는 정보의 오류와 흐름을 관리하여 안전한 정보의 전달을 수행할 수 있도록 도와주는 역할
> 같은 네트워크에 있는 여러대의 컴퓨터들이 데이터를 주고받기 위해서 필요한 모듈

통신에서의 오류도 찾아주고 재전송도 하는 기능. 맥 주소를 가지고 통신하며 전송되는 단위를 프레임이라고 하고, 대표적인 장비로는 브리지, 스위치 등이 있다.(여기서 MAC주소를 사용한다.)
<br/>
-> 브릿지나 스위치를 통해 맥주소를 가지고 물리계층에서 받은 정보를 전달함.


#### 02-1. Framing

-.  Framing은 메시지를 분리하며, sender address와 destination address를 추가한다. 비트들을 프레임 단위로 묶어서, 각 프레임이 구별가능하도록 해야한다.

<br/>

포인트 투 포인트(Point to Point)간 신뢰성있는 전송을 보장하기 위한 계층으로 CRC 기반의 오류 제어와 흐름 제어가 필요하다.
네트워크 위의 개체들 간 데이터를 전달하고, 물리 계층에서 발생할 수 있는 오류를 찾아내며, 수정하는 데 필요한 기능적, 절차적 수단을 제공한다.
네트워크 브릿지나 스위치 등이 이 계층에서 동작하며, 직접 이어진 곳에만 연결할 수 있다.
<br/>

-> 프레임에 주소부여(MAC - 물리적주소), 에러검출/재전송/흐름제어

data -> 2계층 encoder -> framing data(1111data0000) -> 1계층 encoder -> 아날로그 신호 -> 1계층 decoder -> 2계층 decoder -> flag제거된 data

### 03. Network Layer

> 수많은 네트워크들의 연결로 이루어진 inter-network속 목적지로 데이터를 전송하기 위해
> IP주소를 이용해 길을 찾고(Routing) 자신의 다음 라우터에게 데이터를 넘겨주는 것(forwarding)

#### 03-1. Routing

> 데이터를 목적지까지 가장 안전하고 빠르게 전달하는 기능
> 다양한 기술과 프로토콜의 종류에 대해 따로 공부 필요.. 

경로를 선택하고 주소를 정하고 경로에 따라 패킷(IP + data)을 전달해주는 것이 이 계층의 역할이다.
이 계층의 대표적인 장비는 라우터 이며, 요즘은 2계층의 장비 중 스위치라는 장비에 라우팅 기능을 장착한 Layer 3 스위치도 있다고 한다.
(여기서 IP주소를 사용한다.)
<br/>

네트워크 계층(Network layer)은 여러개의 노드를 거칠때마다 경로를 찾아주는 역할을 하는 계층으로
다양한 길이의 데이터를 네트워크들을 통해 전달하고, 그 과정에서 전송 계층이 요구하는 서비스 품질(QoS)을 제공하기 위한 기능적, 절차적 수단을 제공한다.

네트워크 계층은 라우팅, 흐름 제어, 세그멘테이션(segmentation/desegmentation), 오류 제어, 인터네트워킹(Internetworking) 등을 수행한다.
데이터를 연결하는 다른 네트워크를 통해 전달함으로써 인터넷이 가능하게 만드는 계층이다.

논리적인 주소 구조(IP), 곧 네트워크 관리자가 직접 주소를 할당하는 구조를 가지며, 계층적(hierarchical)이다.
서브네트의 최상위 계층으로 경로를 설정하고, 청구 정보를 관리한다. 개방형 시스템들의 사이에서 네트워크 연결을 설정, 유지, 해제하는 기능을 부여하고, 전송 계층 사이에 네트워크 서비스 데이터 유닛(NSDU : Network Service Data Unit)을 교환하는 기능을 제공한다.
-> 주소부여(IP), 경로설정(Route)

data -> 3계층 encoder -> 패킷data -> 2계층 encoder -> 1계층 encoder -> 1계층 decoder -> 2계층 decoder -> 3계층 decoder -> data -> 3계층 encoder -> ...

### 04. Transport Layer

> Port번호를 사용해 도착지 컴퓨터의 최종 도착지인 프로세스에까지 데이터가 도달하게 하는 모듈
> 3계층과 마찬가지로 운영체제 커널에 SW적으로 구현되어 있음

#### 04-1. 포트번호
-. 하나의 컴퓨너에서 동시에 실행되고 있는 프로세스들이 서로 겹치지않게 가져야하는 정수  ex) www.naver.com:80 (포트번호 생략 가능)

통신을 활성화하기 위한 계층, 보통 TCP프로토콜을 이용하며, 포트를 열어서 응용프로그램들이 전송을 할 수 있게 한다.
만약 데이터가 왔다면 4계층에서 해당 데이터를 하나로 합쳐서 5계층에 던져 준다.

전송 계층(Transport layer)은 양 끝단(End to end)의 사용자들이 신뢰성있는 데이터를 주고 받을 수 있도록 해 주어, 상위 계층들이 데이터 전달의 유효성이나 효율성을 생각하지 않도록 해준다.
시퀀스 넘버 기반의 오류 제어 방식을 사용한다. (패킷헤더에 Sequence & Ack Number를 부여해 순서를 지키며, 섞이거나 중복을 방지)

-> 패킷 생성(Assembly/Sequencing/Deassembly/Error detection/Request repeat/Flow control) 및 전송

data -> 4계층 encoder -> Port No. + data -> 3계층 encoder -> ... -> Port No. + data -> 4계층 decoder -> data

### 05. Session Layer

> 데이터가 통신하기 위한 논리적인 연결(통신을 위한 대문)
> 4계층과 무관한 응용 프로그램 관점

4계층에서도 연결을 맺고 종료할 수 있기 때문에 우리가 어느 계층에서 통신이 끊어 졌나 판단하기는 한계가 있다.
그러므로 세션 계층은 4 계층과 무관하게 응용 프로그램 관점에서 봐야 한다. 세션 설정, 유지, 종료, 전송 중단시 복구 등의 기능이 있다.

세션 계층(Session layer)은 양 끝단의 응용 프로세스가 통신을 관리하기 위한 방법을 제공한다.
동시 송수신 방식(duplex), 반이중 방식(half-duplex), 전이중 방식(Full Duplex)의 통신과 함께, 체크 포인팅과 유휴, 종료, 다시 시작 과정 등을 수행한다.
이 계층은 TCP/IP 세션을 만들고 없애는 책임을 진다.

-> 통신하는 사용자들을 동기화하고 오류복구 명령들을 일괄적으로 다룬다. 통신을 하기 위한 세션을 확립/유지/중단 (운영체제가 해줌)

### 06. Presentation Layer

> 코드 간 번역을 담당해 사용자 시스템에서 데이터의 형식상 차이를 다루는 부담을 응용계층으로부터 덜어준다.

데이터 표현이 상이한 응용 프로세스의 독립성을 제공하고, 암호화 한다.
코드 간의 번역을 담당하여 사용자 시스템에서 데이터의 형식상 차이를 다루는 부담을 응용 계층으로부터 덜어 준다. MIME 인코딩이나 암호화 등의 동작이 이 계층에서 이루어진다.

예를 들면, EBCDIC으로 인코딩된 문서 파일을 ASCII로 인코딩된 파일로 바꿔 주는 것,
해당 데이터가 TEXT인지, 그림인지, GIF인지 JPG인지의 구분 등이 표현 계층의 몫이다.

-> 사용자의 명령어를 완성및 결과 표현. 포장/압축/암호화

### 07. Application Layer

> TCP/IP 모델의 점유율이 증가하면서 5,6,7 Layer가 하나로 합쳐지고 있음

#### 07-1. TCP/IP 소켓 프로그래밍

> OS의 Transport Layer에서 제공하는 API를 활용해 통신 가능한 프로그램을 만드는 것
> 누구나 Application Layer 프로토콜을 만들 수 있게 되었다.

최종 목적지로서 HTTP, FTP, SMTP, POP3, IMAP, Telnet 등과 같은 프로토콜이 있다.
해당 통신 패킷들은 방금 나열한 프로토콜에 의해 모두 처리되며 우리가 사용하는 브라우저나, 메일 프로그램은 프로토콜을
보다 쉽게 사용하게 해주는 응용프로그램이다. 한마디로 모든 통신의 양 끝단은 HTTP와 같은 프로토콜이지 응용프로그램이 아니다.

응용 계층(Application layer)은 응용 프로세스와 직접 관계하여 일반적인 응용 서비스를 수행한다.
일반적인 응용 서비스는 관련된 응용 프로세스들 사이의 전환을 제공한다.
응용 서비스의 예로, 가상 터미널(예를 들어, 텔넷), "Job transfer and Manipulation protocol" (JTM, 표준 ISO/IEC 8832) 등이 있다.

-> 네트워크 소프트웨어 UI 부분, 사용자의 입출력(I/O)부분